using Plots

x1 = [-1, 0, 1, 2.31326, 3]
y1 = [1, 0.5, -1, 4, 5]

l0 = (x) -> @. ((x - 0) * (x - 1) * (x - 2.31326) * (x - 3)) / ((-1 - 0) * (-1 - 1) * (-1 - 2.31326) * (-1 - 3))
l1 = (x) -> @. ((x + 1) * (x - 1) * (x - 2.31326) * (x - 3)) / ((0 + 1) * (0 - 1) * (0 - 2.31326) * (0 - 3))
l2 = (x) -> @. ((x + 1) * (x - 0) * (x - 2.31326) * (x - 3)) / ((1 + 1) * (1 - 0) * (1 - 2.31326) * (1 - 3))
l3 = (x) -> @. ((x + 1) * (x - 0) * (x - 1) * (x - 3)) / ((2.31326 + 1) * (2.31326 - 0) * (2.31326 - 1) * (2.31326 - 3))
l4 = (x) -> @. ((x + 1) * (x - 0) * (x - 1) * (x - 2.31326)) / ((3 + 1) * (3 - 0) * (3 - 1) * (3 - 2.31326))

p = (x) -> @. 1 * l0(x) + 0.5 * l1(x) + -1 * l2(x) + 4 * l3(x) + 5 * l4(x)

f = (x) -> @. (-0.5 * x^4) + (2 * x^3) - (3 * x) + 0.5
err = (x) -> p(x) - f(x)

x = -1:0.001:3
index = []
err_abs = []

for i = -1:0.001:3
    append!(index, i)
    append!(err_abs, abs(f(i) - p(i)))
end

valueMax, indexMax = findmax(err_abs)
println(valueMax)
println(index[indexMax])

plot(x, p(x))
scatter!(x1, y1)